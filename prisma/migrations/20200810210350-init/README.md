# Migration `20200810210350-init`

This migration has been generated by Alexandre at 8/10/2020, 11:03:50 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Language" (
"id" SERIAL,
"index" SERIAL,
"name" text  NOT NULL ,
"slug" text  NOT NULL ,
"code" text  NOT NULL ,
"rtl" boolean  NOT NULL DEFAULT false,
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
"updatedAt" timestamp(3)  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."User" (
"id" SERIAL,
"email" text  NOT NULL ,
"password" text  NOT NULL ,
"name" text  NOT NULL ,
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
"updatedAt" timestamp(3)  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Project" (
"id" SERIAL,
"index" SERIAL,
"name" text  NOT NULL ,
"slug" text  NOT NULL ,
"screenshot" text   ,
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
"updatedAt" timestamp(3)  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."View" (
"id" SERIAL,
"index" SERIAL,
"name" text  NOT NULL ,
"slug" text  NOT NULL ,
"screenshot" text   ,
"projectId" integer  NOT NULL ,
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
"updatedAt" timestamp(3)  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Translation" (
"id" SERIAL,
"index" SERIAL,
"key" text  NOT NULL ,
"label" text   ,
"x" Decimal(65,30)   ,
"y" Decimal(65,30)   ,
"viewId" integer  NOT NULL ,
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
"updatedAt" timestamp(3)  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."LanguagesOnTranslations" (
"translationId" integer  NOT NULL ,
"languageId" integer  NOT NULL ,
"value" text  NOT NULL ,
PRIMARY KEY ("translationId","languageId"))

CREATE TABLE "public"."_LanguageToProject" (
"A" integer  NOT NULL ,
"B" integer  NOT NULL )

CREATE TABLE "public"."_ProjectToUser" (
"A" integer  NOT NULL ,
"B" integer  NOT NULL )

CREATE UNIQUE INDEX "User.email_unique" ON "public"."User"("email")

CREATE UNIQUE INDEX "_LanguageToProject_AB_unique" ON "public"."_LanguageToProject"("A","B")

CREATE  INDEX "_LanguageToProject_B_index" ON "public"."_LanguageToProject"("B")

CREATE UNIQUE INDEX "_ProjectToUser_AB_unique" ON "public"."_ProjectToUser"("A","B")

CREATE  INDEX "_ProjectToUser_B_index" ON "public"."_ProjectToUser"("B")

ALTER TABLE "public"."View" ADD FOREIGN KEY ("projectId")REFERENCES "public"."Project"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Translation" ADD FOREIGN KEY ("viewId")REFERENCES "public"."View"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."LanguagesOnTranslations" ADD FOREIGN KEY ("translationId")REFERENCES "public"."Translation"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."LanguagesOnTranslations" ADD FOREIGN KEY ("languageId")REFERENCES "public"."Language"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_LanguageToProject" ADD FOREIGN KEY ("A")REFERENCES "public"."Language"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_LanguageToProject" ADD FOREIGN KEY ("B")REFERENCES "public"."Project"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_ProjectToUser" ADD FOREIGN KEY ("A")REFERENCES "public"."Project"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_ProjectToUser" ADD FOREIGN KEY ("B")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200810210350-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,100 @@
+// This is your Prisma schema file,
+// learn more about it in the docs: https://pris.ly/d/prisma-schema
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+model Language {
+  id    Int @id @default(autoincrement())
+  index Int @default(autoincrement())
+
+  name String
+  slug String
+  code String
+  rtl  Boolean @default(false)
+
+  projects     Project[]
+  translations LanguagesOnTranslations[]
+
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model User {
+  id Int @default(autoincrement()) @id
+
+  email    String @unique
+  password String
+  name     String
+
+  projects Project[]
+
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model Project {
+  id    Int @id @default(autoincrement())
+  index Int @default(autoincrement())
+
+  name       String
+  slug       String
+  screenshot String?
+
+  users     User[]
+  views     View[]
+  languages Language[]
+
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model View {
+  id    Int @default(autoincrement()) @id
+  index Int @default(autoincrement())
+
+  name       String
+  slug       String
+  screenshot String?
+
+  translation Translation[]
+  project     Project       @relation(fields: [projectId], references: [id])
+  projectId   Int
+
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model Translation {
+  id    Int @default(autoincrement()) @id
+  index Int @default(autoincrement())
+
+  key   String
+  label String?
+  x     Float?
+  y     Float?
+
+  view      View                      @relation(fields: [viewId], references: [id])
+  viewId    Int
+  languages LanguagesOnTranslations[]
+
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model LanguagesOnTranslations {
+  @@id([translationId, languageId])
+
+  translation   Translation @relation(fields: [translationId], references: [id])
+  translationId Int
+  language      Language    @relation(fields: [languageId], references: [id])
+  languageId    Int
+
+  value String
+}
```


